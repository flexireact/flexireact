<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Actions - FlexiReact v3 Documentation</title>
  <meta name="description" content="Learn about Server Actions in FlexiReact v3">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230a0a0a'/><text x='50' y='68' font-family='system-ui' font-size='50' font-weight='900' fill='%2300FF9C' text-anchor='middle'>F</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#00FF9C',
            background: '#0a0a0a',
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap');

    body {
      font-family: 'Inter', system-ui, sans-serif;
    }

    .gradient-text {
      background: linear-gradient(135deg, #00FF9C 0%, #00D68F 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    pre {
      background: #111 !important;
    }

    code {
      font-family: 'Fira Code', monospace;
    }
  </style>
</head>

<body class="bg-background text-white min-h-screen">
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-xl border-b border-gray-800">
    <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-lg bg-primary flex items-center justify-center">
          <span class="text-black font-bold">F</span>
        </div>
        <span class="font-bold text-lg">FlexiReact</span>
        <span class="px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full">v3.0</span>
      </a>
      <nav class="hidden md:flex items-center gap-6">
        <a href="index.html" class="text-sm text-gray-400 hover:text-white transition">Home</a>
        <a href="routing.html" class="text-sm text-gray-400 hover:text-white transition">Routing</a>
        <a href="layouts.html" class="text-sm text-gray-400 hover:text-white transition">Layouts</a>
        <a href="data-fetching.html" class="text-sm text-gray-400 hover:text-white transition">Data Fetching</a>
        <a href="server-actions.html" class="text-sm text-primary">Server Actions</a>
        <a href="https://github.com/flexireact/flexireact" target="_blank"
          class="text-sm text-gray-400 hover:text-white transition">GitHub</a>
      </nav>
      <div class="flex items-center gap-4">
        <button id="mobile-menu-btn" class="md:hidden p-2 text-gray-400 hover:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div id="mobile-menu"
    class="hidden fixed inset-0 z-[100] bg-background/95 backdrop-blur-xl transition-all duration-300 opacity-0 pointer-events-none">
    <div class="flex flex-col h-full">
      <div class="px-4 h-16 flex items-center justify-between border-b border-gray-800">
        <span class="font-bold text-lg">Menu</span>
        <button id="close-menu-btn" class="p-2 text-gray-400 hover:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="flex-1 overflow-y-auto p-6">
        <nav class="space-y-6">
          <div class="space-y-3 border-b border-gray-800 pb-6">
            <a href="index.html" class="block text-lg font-medium text-gray-400">Home</a>
            <a href="routing.html" class="block text-lg font-medium text-gray-400">Routing</a>
            <a href="layouts.html" class="block text-lg font-medium text-gray-400">Layouts</a>
            <a href="data-fetching.html" class="block text-lg font-medium text-gray-400">Data Fetching</a>
            <a href="server-actions.html" class="block text-lg font-medium text-white">Server Actions</a>
          </div>
          <div class="space-y-6">
            <div>
              <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Getting Started</h3>
              <ul class="space-y-2">
                <li><a href="index.html#introduction"
                    class="block text-sm text-gray-400 hover:text-white">Introduction</a></li>
                <li><a href="index.html#installation"
                    class="block text-sm text-gray-400 hover:text-white">Installation</a></li>
                <li><a href="index.html#project-structure" class="block text-sm text-gray-400 hover:text-white">Project
                    Structure</a></li>
              </ul>
            </div>
            <div>
              <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Core Concepts</h3>
              <ul class="space-y-2">
                <li><a href="routing.html" class="block text-sm text-gray-400 hover:text-white">Routing</a></li>
                <li><a href="layouts.html" class="block text-sm text-gray-400 hover:text-white">Layouts</a></li>
                <li><a href="data-fetching.html" class="block text-sm text-gray-400 hover:text-white">Data Fetching</a>
                </li>
                <li><a href="server-actions.html" class="block text-sm text-gray-400 hover:text-white">Server
                    Actions</a></li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <div class="pt-16">
    <main class="max-w-4xl mx-auto px-4 py-16">
      <!-- Hero -->
      <div class="mb-12">
        <h1 class="text-5xl font-bold mb-4">
          <span class="gradient-text">Server Actions</span>
        </h1>
        <p class="text-xl text-gray-400">
          Mutate data on the server with type-safe, progressive enhancement
        </p>
      </div>

      <!-- Introduction -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">What are Server Actions?</h2>
        <p class="text-gray-400 mb-6">
          Server Actions are asynchronous functions that run on the server. They can be called from Client or Server
          Components to handle form submissions and data mutations.
        </p>

        <div class="grid md:grid-cols-3 gap-4">
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-2xl mb-2">üîí</div>
            <h3 class="font-semibold mb-1">Secure</h3>
            <p class="text-sm text-gray-400">Run on server, never exposed to client</p>
          </div>
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-2xl mb-2">üìù</div>
            <h3 class="font-semibold mb-1">Type-Safe</h3>
            <p class="text-sm text-gray-400">Full TypeScript support end-to-end</p>
          </div>
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-2xl mb-2">‚ö°</div>
            <h3 class="font-semibold mb-1">Progressive</h3>
            <p class="text-sm text-gray-400">Works without JavaScript enabled</p>
          </div>
        </div>
      </section>

      <!-- Basic Usage -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Basic Usage</h2>
        <p class="text-gray-400 mb-6">
          Define a Server Action with the <code class="text-primary">'use server'</code> directive.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/actions.ts</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { db } from '@/lib/db';
import { revalidatePath } from '@flexireact/core';

export async function createPost(formData: FormData) {
  const title = formData.get('title') as string;
  const content = formData.get('content') as string;
  
  // Validate
  if (!title || !content) {
    return { error: 'Title and content are required' };
  }
  
  // Create post
  const post = await db.post.create({
    data: { title, content }
  });
  
  // Revalidate cache
  revalidatePath('/blog');
  
  return { success: true, post };
}</code></pre>
        </div>
      </section>

      <!-- Forms -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Using with Forms</h2>
        <p class="text-gray-400 mb-6">
          Call Server Actions directly from form actions for progressive enhancement.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/blog/new/page.tsx</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">import { createPost } from '@/app/actions';

export default function NewPost() {
  return (
    &lt;form action={createPost}&gt;
      &lt;input 
        type="text" 
        name="title" 
        placeholder="Title"
        required
      /&gt;
      
      &lt;textarea 
        name="content" 
        placeholder="Content"
        required
      /&gt;
      
      &lt;button type="submit"&gt;
        Create Post
      &lt;/button&gt;
    &lt;/form&gt;
  );
}</code></pre>
        </div>

        <div class="p-4 rounded-xl bg-blue-500/10 border border-blue-500/20">
          <div class="flex items-start gap-3">
            <span class="text-blue-400 text-xl">‚ÑπÔ∏è</span>
            <div>
              <h4 class="font-semibold text-blue-400 mb-1">Progressive Enhancement</h4>
              <p class="text-sm text-gray-400">This form works even if JavaScript is disabled. The browser will submit
                it as a traditional POST request.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Client Components -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Client Components</h2>
        <p class="text-gray-400 mb-6">
          Use Server Actions in Client Components with <code class="text-primary">useFormState</code> and <code
            class="text-primary">useFormStatus</code>.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/components/CreatePostForm.tsx</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use client';

import { useFormState, useFormStatus } from 'react-dom';
import { createPost } from '@/app/actions';

function SubmitButton() {
  const { pending } = useFormStatus();
  
  return (
    &lt;button type="submit" disabled={pending}&gt;
      {pending ? 'Creating...' : 'Create Post'}
    &lt;/button&gt;
  );
}

export function CreatePostForm() {
  const [state, formAction] = useFormState(createPost, null);
  
  return (
    &lt;form action={formAction}&gt;
      {state?.error && (
        &lt;div className="text-red-500"&gt;{state.error}&lt;/div&gt;
      )}
      
      &lt;input type="text" name="title" placeholder="Title" /&gt;
      &lt;textarea name="content" placeholder="Content" /&gt;
      
      &lt;SubmitButton /&gt;
    &lt;/form&gt;
  );
}</code></pre>
        </div>
      </section>

      <!-- Validation -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Validation with Zod</h2>
        <p class="text-gray-400 mb-6">
          Use Zod for type-safe validation in Server Actions.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/actions.ts</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { z } from 'zod';
import { db } from '@/lib/db';

const PostSchema = z.object({
  title: z.string().min(1).max(100),
  content: z.string().min(10).max(5000),
  published: z.boolean().optional(),
});

export async function createPost(formData: FormData) {
  // Parse and validate
  const result = PostSchema.safeParse({
    title: formData.get('title'),
    content: formData.get('content'),
    published: formData.get('published') === 'on',
  });
  
  if (!result.success) {
    return { 
      error: 'Validation failed',
      errors: result.error.flatten().fieldErrors,
    };
  }
  
  // Create post
  const post = await db.post.create({
    data: result.data
  });
  
  return { success: true, post };
}</code></pre>
        </div>
      </section>

      <!-- Revalidation -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Cache Revalidation</h2>
        <p class="text-gray-400 mb-6">
          Revalidate cached data after mutations.
        </p>

        <div class="space-y-6">
          <div>
            <h3 class="text-xl font-semibold mb-4">Revalidate Path</h3>
            <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden">
              <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
                <span class="text-sm font-semibold">Revalidate specific route</span>
              </div>
              <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { revalidatePath } from '@flexireact/core';

export async function updatePost(id: string, data: any) {
  await db.post.update({ where: { id }, data });
  
  // Revalidate the blog page
  revalidatePath('/blog');
  
  // Revalidate specific post
  revalidatePath(\`/blog/\${id}\`);
}</code></pre>
            </div>
          </div>

          <div>
            <h3 class="text-xl font-semibold mb-4">Revalidate Tag</h3>
            <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden">
              <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
                <span class="text-sm font-semibold">Revalidate by cache tag</span>
              </div>
              <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { revalidateTag } from '@flexireact/core';

export async function createPost(data: any) {
  await db.post.create({ data });
  
  // Revalidate all requests tagged with 'posts'
  revalidateTag('posts');
}</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Redirects -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Redirects</h2>
        <p class="text-gray-400 mb-6">
          Redirect after successful mutations.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/actions.ts</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { redirect } from '@flexireact/core';
import { db } from '@/lib/db';

export async function createPost(formData: FormData) {
  const post = await db.post.create({
    data: {
      title: formData.get('title') as string,
      content: formData.get('content') as string,
    }
  });
  
  // Redirect to the new post
  redirect(\`/blog/\${post.slug}\`);
}</code></pre>
        </div>
      </section>

      <!-- Error Handling -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Error Handling</h2>
        <p class="text-gray-400 mb-6">
          Handle errors gracefully in Server Actions.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/actions.ts</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { db } from '@/lib/db';

export async function deletePost(id: string) {
  try {
    await db.post.delete({ where: { id } });
    return { success: true };
  } catch (error) {
    console.error('Failed to delete post:', error);
    return { 
      success: false, 
      error: 'Failed to delete post. Please try again.' 
    };
  }
}</code></pre>
        </div>
      </section>

      <!-- Authentication -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Authentication</h2>
        <p class="text-gray-400 mb-6">
          Protect Server Actions with authentication checks.
        </p>

        <div class="rounded-xl bg-[#111] border border-gray-800 overflow-hidden mb-6">
          <div class="px-4 py-3 bg-[#0d0d0d] border-b border-gray-800">
            <span class="text-sm font-semibold">app/actions.ts</span>
          </div>
          <pre class="p-4 overflow-x-auto"><code class="text-sm text-gray-300">'use server';

import { auth } from '@/lib/auth';
import { db } from '@/lib/db';

export async function createPost(formData: FormData) {
  // Check authentication
  const session = await auth();
  
  if (!session?.user) {
    return { error: 'Unauthorized' };
  }
  
  // Create post with user ID
  const post = await db.post.create({
    data: {
      title: formData.get('title') as string,
      content: formData.get('content') as string,
      authorId: session.user.id,
    }
  });
  
  return { success: true, post };
}</code></pre>
        </div>
      </section>

      <!-- Best Practices -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Best Practices</h2>

        <div class="space-y-4">
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <h3 class="font-semibold text-primary mb-2">‚úì Always Validate Input</h3>
            <p class="text-sm text-gray-400">Never trust client data. Always validate and sanitize input on the server.
            </p>
          </div>

          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <h3 class="font-semibold text-primary mb-2">‚úì Handle Errors Gracefully</h3>
            <p class="text-sm text-gray-400">Return user-friendly error messages and log detailed errors for debugging.
            </p>
          </div>

          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <h3 class="font-semibold text-primary mb-2">‚úì Revalidate After Mutations</h3>
            <p class="text-sm text-gray-400">Use revalidatePath or revalidateTag to update cached data after mutations.
            </p>
          </div>

          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <h3 class="font-semibold text-primary mb-2">‚úì Use TypeScript</h3>
            <p class="text-sm text-gray-400">Leverage TypeScript for type-safe Server Actions and better developer
              experience.</p>
          </div>

          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <h3 class="font-semibold text-primary mb-2">‚úì Keep Actions Focused</h3>
            <p class="text-sm text-gray-400">Each Server Action should do one thing well. Split complex operations into
              multiple actions.</p>
          </div>
        </div>
      </section>

      <!-- Next Steps -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold mb-6">Next Steps</h2>
        <div class="grid md:grid-cols-2 gap-4">
          <a href="index.html#edge-runtime"
            class="group p-6 rounded-xl bg-gradient-to-b from-white/5 to-transparent border border-white/5 hover:border-primary/30 transition-all">
            <h3 class="font-semibold text-lg mb-2 group-hover:text-primary transition">Edge Runtime ‚Üí</h3>
            <p class="text-gray-400 text-sm">Deploy to the edge for global performance</p>
          </a>
          <a href="index.html#flexi-ui"
            class="group p-6 rounded-xl bg-gradient-to-b from-white/5 to-transparent border border-white/5 hover:border-primary/30 transition-all">
            <h3 class="font-semibold text-lg mb-2 group-hover:text-primary transition">FlexiUI ‚Üí</h3>
            <p class="text-gray-400 text-sm">Explore 50+ beautiful UI components</p>
          </a>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-800 py-12 px-4">
      <div class="max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 rounded-lg bg-primary flex items-center justify-center">
            <span class="text-sm font-bold text-black">F</span>
          </div>
          <span class="font-semibold">FlexiReact</span>
        </div>
        <p class="text-sm text-gray-500">Built with ‚ù§Ô∏è by FlexiReact Team</p>
        <div class="flex items-center gap-6">
          <a href="https://github.com/flexireact" class="text-gray-400 hover:text-white transition">GitHub</a>
          <a href="https://npmjs.com/package/@flexireact/core" class="text-gray-400 hover:text-white transition">npm</a>
        </div>
      </div>
    </footer>
  </div>
  </div>
  <script>
    // Mobile Menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const closeMenuBtn = document.getElementById('close-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    function toggleMenu() {
      const isHidden = mobileMenu.classList.contains('hidden');
      if (isHidden) {
        mobileMenu.classList.remove('hidden');
        setTimeout(() => {
          mobileMenu.classList.remove('opacity-0', 'pointer-events-none');
        }, 10);
        document.body.style.overflow = 'hidden';
      } else {
        mobileMenu.classList.add('opacity-0', 'pointer-events-none');
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
        }, 300);
        document.body.style.overflow = '';
      }
    }

    mobileMenuBtn.addEventListener('click', toggleMenu);
    closeMenuBtn.addEventListener('click', toggleMenu);

    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        toggleMenu();
      });
    });
  </script>
</body>

</html>